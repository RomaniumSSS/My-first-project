# Архитектура проекта

## Обзор
Telegram-бот для коучинга и отслеживания целей с использованием AI.

## Технологический стек
- **Язык**: Python 3.11+
- **Бот-фреймворк**: Aiogram 3.x (Async IO)
- **ORM**: Tortoise ORM
- **База данных**: SQLite (для MVP)
- **AI Сервис**: OpenAI API (GPT-4o/GPT-5.1) + Tenacity (Retry logic)
- **Миграции**: Aerich

## Структура проекта
- `src/main.py`: Точка входа.
- `src/bot/handlers/`: Обработчики команд и состояний.
- `src/bot/states.py`: FSM состояния (Onboarding, GoalSetting).
- `src/database/models.py`: Модели БД (User, Goal, CheckIn).
- `src/services/`: Внешние сервисы (AI, Vision).

## Ключевые рабочие процессы (Workflows)

### 1. Онбординг (Onboarding)
Запускается при первом `/start`.
1. **Сбор имени**: Пользователь вводит имя.
2. **Главная цель**: Пользователь вводит первую цель.
3. **Результат**: Создается запись `User` и первая запись `Goal` (status='active').

### 2. Постановка цели (/new_goal)
1. **Заголовок**: Краткое название цели.
2. **Описание**: Детальное описание (Зачем? Как понять успех?).
3. **Визуализация (опционально)**: Фото/Мудборд.
   - Если фото есть: скачивается, конвертируется в Base64, сохраняется в БД.
4. **AI Анализ**:
   - Данные (Текст + Фото) отправляются в OpenAI.
   - Бот возвращает мотивирующий ответ и 3 первых шага.
5. **Сохранение**: Цель сохраняется в БД.
